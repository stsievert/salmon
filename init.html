<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Experiment initialization &mdash; Salmon  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/autodoc_pydantic.css" type="text/css" />
      <link rel="stylesheet" href="_static/basic.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sampler configuration" href="samplers.html" />
    <link rel="prev" title="Getting started" href="getting-started.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #494646" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Experiment initialization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#experiment-initialization-with-yaml-file">Experiment initialization with YAML file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#yaml-file-with-zip-file">YAML file with ZIP file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#images-videos">Images/videos</a></li>
<li class="toctree-l3"><a class="reference internal" href="#text-targets">Text targets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#database-dump">Database dump</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="samplers.html">Sampler configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="frontend.html">Frontend customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploying.html">Deploying</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Experiment monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="offline.html">Generating embeddings offline</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Benchmarks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/server.html">Concurrent Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="benchmarks/active.html">Active sampling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Algorithm Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="adaptive.html">Adaptive algorithm primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developing algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="deps.html">Dependencies</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #494646" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Salmon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Experiment initialization</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/stsievert/salmon/blob/master/docs/source/init.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="experiment-initialization">
<span id="init"></span><h1>Experiment initialization<a class="headerlink" href="#experiment-initialization" title="Permalink to this heading"></a></h1>
<p>Throughout the documentation, the YAML file for initialization will be referred
to as <code class="docutils literal notranslate"><span class="pre">init.yaml</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method is required even if images/videos are includes in a ZIP file (as
described in <a class="reference internal" href="#yaml-plus-zip"><span class="std std-ref">YAML file with ZIP file</span></a>). Uploading a ZIP file only modifies the
<code class="docutils literal notranslate"><span class="pre">targets</span></code> “key” in the YAML file.</p>
</div>
<p>Now, let’s describe three methods on how to launch this experiment:</p>
<section id="experiment-initialization-with-yaml-file">
<span id="yamlinitialization"></span><h2>Experiment initialization with YAML file<a class="headerlink" href="#experiment-initialization-with-yaml-file" title="Permalink to this heading"></a></h2>
<p>“YAML files” must obey a standard; see for a (human-readable) description of
the specification <a class="reference external" href="https://learnxinyminutes.com/docs/yaml/">https://learnxinyminutes.com/docs/yaml/</a>. To see if your YAML
is valid, go to <a class="reference external" href="https://yamlchecker.com/">https://yamlchecker.com/</a>.  Here’s an example <code class="docutils literal notranslate"><span class="pre">init.yaml</span></code> YAML
file for initialization:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># file: init.yaml</span><span class="w"></span>
<span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;l&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;&lt;i&gt;kildow&lt;/i&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;&lt;i&gt;ligety&lt;/i&gt;&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># or uploaded via ZIP file</span><span class="w"></span>
<span class="nt">html</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">instructions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Select the item on the bottom most similar to the item on the top.</span><span class="w"></span>
<span class="w">  </span><span class="nt">debrief</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Thanks! Use the participant ID below in Mechnical Turk.</span><span class="w"></span>
<span class="w">  </span><span class="nt">max_queries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>
</pre></div>
</div>
<p>This file will initialize a basic experiment. By default, Salmon will do the
following:</p>
<ul class="simple">
<li><p><strong>Use random sampling.</strong> This is a very simple configuration – but it may
not be what you want. Relevant FAQs:</p>
<ul>
<li><p>“<a class="reference internal" href="faq.html#random-vs-active"><span class="std std-ref">When should I use random/active sampling?</span></a>”</p></li>
<li><p>“<a class="reference internal" href="faq.html#adaptiveconfig"><span class="std std-ref">What active samplers are recommended?</span></a>” This FAQ links to <a class="reference internal" href="samplers.html#alg-config"><span class="std std-ref">Sampler configuration</span></a>.</p></li>
</ul>
</li>
<li><p>Ask 50 questions before showing the participant ID.</p></li>
<li><p>Embed into <span class="math notranslate nohighlight">\(d=2\)</span> dimensions if active samplers are specified.</p></li>
</ul>
<p>More documentation on customizing these fields can be found in
<a class="reference internal" href="samplers.html#alg-config"><span class="std std-ref">Sampler configuration</span></a> and <a class="reference internal" href="frontend.html#frontendcustomization"><span class="std std-ref">Frontend customization</span></a>, and the defaults for
instructions/debrief can be found in <a class="reference internal" href="generated/salmon.triplets.manager.HTML.html#salmon.triplets.manager.HTML" title="salmon.triplets.manager.HTML"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTML</span></code></a>. To
do anything fancier, additional configuration is required. Here’s a basic
example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># file: init.yaml</span><span class="w"></span>
<span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;l&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;&lt;i&gt;kildow&lt;/i&gt;&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;t&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;&lt;i&gt;ligety&lt;/i&gt;&quot;</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># or uploaded via ZIP file</span><span class="w"></span>
<span class="nt">html</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">max_queries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>
<span class="nt">samplers</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ARR</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;random_state&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">42</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">Random</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span><span class="w"></span>
<span class="nt">sampling</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">probs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;ARR&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">85</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Random&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">15</span><span class="p p-Indicator">}</span><span class="w"></span>
<span class="w">  </span><span class="nt">common</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w">  </span><span class="c1"># embed into 3 dimensions for all active samplers</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">samplers</span></code> controls which methods get to choose queries, and <code class="docutils literal notranslate"><span class="pre">sampling</span></code>
controls how multiple samplers interact (i.e., how should a sampler be chosen?)
More documentation can be found at <a class="reference internal" href="samplers.html#alg-config"><span class="std std-ref">Sampler configuration</span></a>.</p>
<p>Complete details on the YAML file are at at
<a class="reference internal" href="generated/salmon.triplets.manager.Config.html#salmon.triplets.manager.Config" title="salmon.triplets.manager.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a>. Examples of these files are in
<a class="reference external" href="https://github.com/stsievert/salmon/tree/master/examples">salmon/examples</a>. A complete example is available at
<a class="reference external" href="https://github.com/stsievert/salmon/tree/master/examples/complete.yaml">salmon/examples/complete.yaml</a>.</p>
</section>
<section id="yaml-file-with-zip-file">
<span id="yaml-plus-zip"></span><h2>YAML file with ZIP file<a class="headerlink" href="#yaml-file-with-zip-file" title="Permalink to this heading"></a></h2>
<p>Uploading a ZIP file for targets/stimuli is a small addition to
“<a class="reference internal" href="#yamlinitialization"><span class="std std-ref">Experiment initialization with YAML file</span></a>.” The only difference is that uploading a ZIP file
overwrites and configures the <code class="docutils literal notranslate"><span class="pre">targets</span></code> key for you (so it’s not necessary to
specify the <code class="docutils literal notranslate"><span class="pre">targets</span></code> key when uploading a ZIP file).</p>
<p>Here are the choices for different files to include in the ZIP file:</p>
<ul class="simple">
<li><p>A single CSV file. Each textual target should be on a new line.</p></li>
<li><p>A bunch of images/videos. Support extensions:</p>
<ul>
<li><p>Videos: <code class="docutils literal notranslate"><span class="pre">mp4</span></code>, <code class="docutils literal notranslate"><span class="pre">mov</span></code></p></li>
<li><p>Images: <code class="docutils literal notranslate"><span class="pre">png</span></code>, <code class="docutils literal notranslate"><span class="pre">gif</span></code>, <code class="docutils literal notranslate"><span class="pre">jpg</span></code>, <code class="docutils literal notranslate"><span class="pre">jpeg</span></code></p></li>
</ul>
</li>
</ul>
<p>A YAML file must be uploaded describing the experiment in addition to including
the targets in the ZIP file.  Let’s walk through two examples, both with
uploading a bunch of images with skiers. Both cases will use this <code class="docutils literal notranslate"><span class="pre">init.yaml</span></code>
file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># file: init.yaml</span><span class="w"></span>
<span class="nt">html</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">instructions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w">  </span><span class="c1"># multi-line YAML string</span><span class="w"></span>
<span class="w">      </span><span class="no">Select the &lt;i&gt;comparison&lt;/i&gt; item on the bottom that</span><span class="w"></span>
<span class="w">      </span><span class="no">is most similar to the &lt;i&gt;target&lt;/i&gt; item on the top.</span><span class="w"></span>
<span class="w">  </span><span class="nt">debrief</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;b&gt;Thanks!&lt;/b&gt; Use the participant ID below in Mechanical Turk.</span><span class="w"></span>
<span class="w">  </span><span class="nt">max_queries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Uploading a ZIP file completely replaces any specification of the
<code class="docutils literal notranslate"><span class="pre">targets</span></code> key above. This means that it is not necessary to specify the
<code class="docutils literal notranslate"><span class="pre">targets</span></code> key when a ZIP file is uploaded because it will be specified
automatically.</p>
</div>
<section id="images-videos">
<h3>Images/videos<a class="headerlink" href="#images-videos" title="Permalink to this heading"></a></h3>
<p>If I had all these images in a ZIP file (say <code class="docutils literal notranslate"><span class="pre">skiers.zip</span></code>), I would gather
all the images into a ZIP file. On macOS, that’s possible by selecting all the
images then control-clicking and selecting “Compress items.” On the command
line, the command <code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">targets.zip</span> <span class="pre">*.jpg</span> <span class="pre">*.png</span></code> will collect all JPG/PNG
images into <code class="docutils literal notranslate"><span class="pre">targets.zip</span></code>.</p>
</section>
<section id="text-targets">
<h3>Text targets<a class="headerlink" href="#text-targets" title="Permalink to this heading"></a></h3>
<p>This is a valid CSV file that will render textual targets:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># file: targets.csv. Zipped into targets.csv.zip and uploaded.</span>
<span class="n">Bode</span> <span class="n">Miller</span>
<span class="n">Lindsey</span> <span class="n">Kildow</span>
<span class="n">Mikaela</span> <span class="n">Shiffrin</span>
<span class="o">&lt;</span><span class="n">b</span><span class="o">&gt;</span><span class="n">Ted</span> <span class="n">Ligety</span><span class="o">&lt;/</span><span class="n">b</span><span class="o">&gt;</span>
<span class="n">Paula</span> <span class="n">Moltzan</span>
<span class="n">Jessie</span> <span class="n">Diggins</span>
</pre></div>
</div>
<p>Again, every line here is valid HTML, so the crowdsourcing participant will see
bolded text for “<strong>Ted Ligety</strong>.” That means we can also render images:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># file: targets.csv. Zipped into targets.csv.zip and uploaded.</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://upload.wikimedia.org/wikipedia/commons/3/30/Bode_Miller_at_the_2010_Winter_Olympic_downhill.jpg&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://upload.wikimedia.org/wikipedia/commons/8/89/Miller_Bode_2008_002.jpg&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://upload.wikimedia.org/wikipedia/commons/5/5e/Lindsey_Kildow_Aspen.jpg&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://commons.wikimedia.org/wiki/File:Michael_Sablatnik_Slalom_Spital_am_Semmering_2008.jpg&quot;</span> <span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">img</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300px&quot;</span> <span class="n">src</span><span class="o">=</span><span class="s2">&quot;https://upload.wikimedia.org/wikipedia/commons/e/e9/Kjetil_Jansrud_giant_slalom_Norway_2011.jpg&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>One rendered target will be this image:</p>
<img width="300px" src="https://upload.wikimedia.org/wikipedia/commons/8/89/Miller_Bode_2008_002.jpg" /></section>
</section>
<section id="database-dump">
<h2>Database dump<a class="headerlink" href="#database-dump" title="Permalink to this heading"></a></h2>
<p>The dashboard offers a link to download the experiment on the dashboard (that
is, at <code class="docutils literal notranslate"><span class="pre">http://[url]:8421/dashboard</span></code>). This will download a file called
<code class="docutils literal notranslate"><span class="pre">exp-[date]-vX.Y.Z.rdb</span></code>. Do not delete the numbers <code class="docutils literal notranslate"><span class="pre">X.Y.Z</span></code>!</p>
<p>Salmon supports the upload of this file to the same version of Salmon. The
upload of this file will restore the state of your experiment. After this file
is uploaded, the two machines will become indistinguishable from each other
(which allows you to download the entire experiment onto your own machine then
upload it to a completely new machine a month later and start collecting
responses again).</p>
<p>If you run into errors, the FAQ “<a class="reference internal" href="installation.html#restorefrombackupfaq"><span class="std std-ref">Restoring from a backup didn’t work</span></a>” will likely be
relevant.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="getting-started.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="samplers.html" class="btn btn-neutral float-right" title="Sampler configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, Scott Sievert.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>